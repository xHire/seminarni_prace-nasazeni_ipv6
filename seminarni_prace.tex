\documentclass[12pt]{report}
\usepackage[utf8x]{inputenc}
\usepackage[myczech]{babel}
\usepackage{a4wide}
\linespread{1,5}		% 1,5 řádkování
\usepackage[hmargin={3cm,2cm},vmargin={2.5cm,2.5cm},includeheadfoot]{geometry}
\usepackage{indentfirst}	% odsazení prvního řádku v odstavci

% hezká záhlaví
\usepackage{fancyhdr}
\pagestyle{fancy}
\setlength{\headheight}{15pt}

% nastavení
\setcounter{chapter}{-1}	% aby úvod byl 0

% vlastní makra
\newcommand{\kapitola}[1]{
	\refstepcounter{chapter}
	\lhead{\thechapter. #1}
	\rhead{Michal Zima}
	\typeout{\chaptername\space\thechapter.}
	\chapter*{\protect\thechapter\hspace{0.75em} #1}
	\addcontentsline{toc}{chapter} {
		\protect\numberline{\thechapter}#1
	}
}
\newcommand\uv[1]{\quotedblbase #1\textquotedblleft}

% data do titulky
\title{Nasazení IPv6 v praxi}
\author{Michal Zima}
\date{}

\begin{document}
% titulka
\maketitle
\setcounter{page}{2}	% titulka se prý má také počítat...

% titulní list?

% prohlášení, místo a datum
\thispagestyle{empty}
Prohlašuji, že jsem svou seminární práci napsal samostatně a výhradně s použitím citovaných pramenů. Souhlasím se zapůjčováním práce a jejím zveřejňováním v souladu s licencí Creative Commons Attribution-Share Alike.

\bigskip	% vynechá řádek
\noindent V Třebíči dne \today \hspace{\fill}Michal Zima
\newpage{}

% zadání

% anotace/abstrakt - odborný souhrn nejdůležitějších myšlenek (dvojjazyčně)
\thispagestyle{plain}
\section*{Nasazení IPv6 v praxi\\Implementation of IPv6 in use}

\subsection*{Anotace}
Seminární práce se zabývá problematikou nasazení technologie IPv6 do reálného prostředí tak, aby se eliminovalo použití staré technologie IPv4 uvnitř malých sítí. Cílem je usnadnit pozdější přechod celosvětového Internetu na tuto novou technologii.

\subsection*{Anotation}
Abstract labour deals with problematic of implementation IPv6 technology into real environment so that use of old IPv4 technology would be eliminated. The goal is to make easier further transforming worldwide Internet to this new technology.

% seznam klíčových slov (dvojjazyčně)
\subsection*{Klíčová slova}
Internet, IPv4, IPv6, NAT, IP Maškaráda, TCP, UDP, ICMP, tunelování

\subsection*{Keywords}
Internet, IPv4, IPv6, NAT, IP Masquerading, TCP, UDP, ICMP, tunneling
\newpage{}

% obsah
\lhead{Obsah}
\rhead{Michal Zima}
\tableofcontents
\newpage

% vlastní text práce
\kapitola{Úvod}
Všechno na světě se vyvíjí a nejinak je tomu s počítačovými technologiemi -- konkrétně tedy se sítěmi a Internetem. Přenosové rychlosti úspěšně rostou, množství přenesených dat též. S tím souvisí i nárůst počtu připojených serverů a klientů do této sítě. Jenže servery potřebují \uv{být vidět}. Řada klientů zase chce \uv{být vidět}. Musí tedy mít veřejně routovatelnou IP adresu. Protokol IP ve verzi 4 má své mantinely ve formě 32 bitů, a přes ty se již nelze znovu přehoupnout (poprvé to bylo učiněno maškarádou, ale pouze za předpokladu, že klienti, kteří za ní budou schovaní, nebudou chtít být vidět), a proto na ně pomalu začínáme narážet. Řešením je pouze přechod na novou verzi IP protokolu, a to na verzi 6.

IPv6 je na světě již poměrně dlouho -- první koncepty se objevily již v devadesátých letech, ale přesto je jeho produkční nasazení zatím spíše ojedinělé, příp. se jedná o paralelní nasazení současně s IPv4. Přitom situace ve světě IPv4 není zrovna růžová -- nyní, na počátku roku 2009, nám zbývá již jen něco kolem půl miliardy volných IPv4 adres. A víc jich nebude -- budou již jen ubývat. Je možné předpokládat, že čím méně jich bude, tím více se budou společnosti snažit jich co nejvíce získat. Efekt davové paniky.

Je potřeba zajistit, aby lidé začali přecházet -- čím dříve, tím lépe. I kdyby nasazovali IPv6 pouze jako technologii doplňující stávající IPv4, byl by to pokrok. Ovšem stále by správci sítí museli udržovat a spravovat staré IPv4, takže by si práci neušetřili, ba naopak by jim práce přibylo zhruba dvojnásobně. U velkých sítích tedy nelze hledat řešení v této cestě. Je potřeba nasadit čisté IPv6 se vším, co přináší, a využít tak všech jeho výhod naplno. Je samozřejmé, že je potřeba ještě nějaký čas zajišťovat klientům přístup do IPv4 Internetu, takže celý přechod nebude zas až tak jednoduchý. Ovšem jde to, a to je to hlavní, a proto nám již nic nebrání IPv6 plně nasadit.

IPv6 je velkou výzvou, a proto jsem se rozhodl tento nový protokol v domácí síti nasadit. A to bez sekundance staré IPv4. Ačkoliv by se to na první pohled mohlo jevit jako velmi snadný úkol, nebylo to tak docela triviální. Veškeré své postřehy, nabyté zkušenosti i řešení nastalých problémů shrnuji v této seminární práci.
\newpage{}

\kapitola{Výhody a nevýhody IPv6}
Ačkoliv je IPv6 nástupcem za starou verzi 4, nepřináší pouze výhody, ale oproti \uv{čtyřce} má i pár nevýhod. A na některé vlastnosti tohoto protokolu lze pro změnu nahlížet jako na výhodu i nevýhodu.

\section{Výhody}
\subsection{Velké množství adres}
Mezi hlavní výhody této verze \textit{Internetového Protokolu} patří především nesrovnatelně vyšší adresní rozsah, který lze použít. Namísto $2^{32}$ IPv4 adres najednou získáváme $2^{128}$ IPv6 adres. Tolik proklínaná maškaráda (běžněji známá jako tzv. NAT) se může velmi jednoduše stát minulostí.

\subsection{Autokonfigurace klientů}
IPv6 má velmi dobře vyřešenou schopnost autokonfigurace koncových klientů, takže v~mnoha případech odpadá (na první pohled) složitá konfigurace a vše funguje prakticky okamžitě -- stačí nastavit router.

\subsection{Menší nároky na výkon}
IPv6 protokol klade menší nároky na výpočetní výkon routerů, a to hned z několika důvodů: jednak není potřeba provádět maškarádu (překlad adres), a za další se pakety po cestě nefragmentují, takže routery nemusí pokaždé přepočítávat kontrolní součty (paket buď projde nebo bude zahozen -- samozřejmě s odesláním příslušného informačního ICMP paketu odesílateli).

\subsection{Zjednodušení hlavičky}
Hlavička IPv6 protokolu prošla přísnou revizí a mnoho zbytečných polí bylo odstraněno nebo nahrazeno -- z původních 12 zbylo pouze 8. Je to dáno také tím, že se o něco méně počítá s fragmentací paketů (neboť ji provádí pouze odesílatel), takže ta je přesunuta do rozšiřujících hlaviček.

\section{Nevýhody}
\subsection{Horší zapamatovatelnost adres}
Již od pohledu je na IPv6 vidět, že má velmi dlouhé adresy, a tím pádem i mnohem hůře zapamatovatelné než mělo IPv4. Je to daň za 128 bitů, ale vzhledem k možnosti zkracování (vynechávání počátečních nul v jednotlivých blocích, příp. vypouštění nulových bloků) je adresa často daleko jednodušší.

\subsection{Obtížnější boj se SPAMmery}
Mnohem více adres globálně znamená i mnohem více adres na osobu. Tedy i SPAMmeři jich dostanou obrovské množství. Bohužel se tím značně ztíží efektivita jejich blokování podle IP adres -- jedinou možností, jak se s tím vypořádat, je začít blokovat celé subnety i s tím rizikem, že tím mohou být postiženi i slušní uživatelé.

\subsection{Nutnost nových utilit}
Řada základních programů pro práci se sítí není s IPv6 přímo kompatibilní, a proto vznikly \uv{šestkové} verze těchto programů, přičemž jim byla přidána šestka na konec názvu, např. \textit{ping6}, \textit{traceroute6}. Někdy stará verze programu zastará a je jednoduše nahrazena novější, která IPv6 umí. V případě programu \textit{ifconfig} došlo přímo k nahrazení jiným programem (\textit{ip}) z balíku \textit{iproute2}.

\subsection{Větší IP hlavička}
IPv6 protokol má trošku větší hlavičku protokolu, a to o 20 B, což není moc, když vezmeme v úvahu, že potřebný datový prostor vzrostl o 24 B. Je tedy vidět, že formát hlavičky má za sebou pročištění a značné zjednodušení. Teoreticky by mohl v důsledku větší hlavičky trochu narůst globální traffic, ale ten poroste spíše z jiných důvodů.
\newpage{}

\kapitola{Důvody nasazení IPv6}
\section{Konec IPv4 na dohled}
Podle odhadů společnosti Intec NetCore, Inc. dojde adresní rozsah IPv4 na začátku roku 2011. Svět má tedy přibližně dva roky, aby se plně připravil na IPv6. V případě ignorování této \uv{hrozby} je možné očekávat vážné problémy.

\subsection{IPv4 adres je málo}
Nedostatek IPv4 adres je obecně považován za hnací motor a motivaci k přechodu na novou verzi IP protokolu. Vše ostatní je pak pouze považováno za příjemný vedlejší efekt. Dohromady ovšem dávají dobrý důvod, proč jít od IPv4 \uv{pryč}.

\subsection{IPv4 je drahý \uv{luxus}}
Dnes se prakticky za každou přidělenou IPv4 adresu platí velké peníze. Nejvíce to pociťují klienti ISP, webmasteři webů, které potřebují mít SSL zabezpečení, ale i samotní provozovatelé serverů. Jinak řečeno se dnes IPv4 adresy vyvažují takřka zlatem. A to proto, aby se zabránilo davové panice \uv{syslení} ještě volných adres, což by vedlo k jejich rychlému vyčerpání.

\section{IPv6 je dobré řešení}
\subsection{Rozdíl v ceně}
Zmínil jsem vysokou cenu za každou jednotlivou IPv4 adresu. Ve světě IPv6 naopak každý rozdává celé prefixy adres -- většinou druhou mocninu velikosti celého IPv4! 
Oproti IPv4 je IPv6 vskutku levné: jedinou investicí je implementace IPv6 do sítě, příp. obměna zastaralých síťových zařízení, které tento nový protokol nepodporují. Dál už si mohou všichni užívat přehršele volných adres.

\subsection{Malé množství přechodů}
Je až s podivem, že se přechody na novou verzi málokdo zabývá. Přitom motivace ve~formě tolika výhod je obrovská. Pravděpodobně se většina lidí nového protokolu bojí a snaží se jeho nasazení odkládat, jak jen to půjde, leč je takové řešení velmi krátkozraké a může se nevyplatit. Je ovšem též možné, že jen nevědí, jak přejít. Nechtějí řešit IPv4 i IPv6 v~jedné síti a jiné řešení ještě není všeobecně známo (čistá IPv6 síť by pro ně v tento moment znamenala odříznutí od velké části světového Internetu, což je neakceptovatelná podmínka), přičemž oni ho vymýšlet nechtějí.
\newpage{}

\kapitola{Předpoklady nasazení IPv6}
\section{Operační systém}
Základním předpokladem pro úspěšné nasazení IPv6 je vlastnictví IPv6 kompatibilního operačního systému. To je základ, bez kterého se za žádných okolností neobejdeme. Příslušná IPv6 konektivita je vždy až na druhém místě, stejně tak podpora IPv6 v aplikacích či síťových prvcích.

\subsection{GNU/Linux}
GNU/Linux byl vůbec první operační systém na světě, který IPv6 implementoval, a to již v roce 1996 ve verzi 2.1.8. Status experimentální implementace byl odstraněn v roce 2005 ve verzi 2.6.12. Od té doby je IPv6 plně podporované a funkční.

\subsection{Apple Mac OS X a jiné BSD systémy}
Do BSD systémů byla již v roce 2000 zařazena kvalitní implementace IPv6 projektu KAME, který byl započat roku 1998. Následně od roku 2003 je v Apple Mac OS X ve~výchozím nastavení IPv6 zapnuté.

\subsection{Microsoft Windows}
Ačkoliv začal Microsoft na podpoře IPv6 pracovat již v roce 1998, implementaci vhodnou do produkčního nasazení uvedl až ve verzi Vista v roce 2007. Napůl funkční implementace se též nachází v XP SP1 až SP3 z roku 2002, ovšem v praxi jí nelze využít, pokud klient současně nemá k dispozici i staré IPv4.

\section{Aplikace}
V případě, že klient má kompatibilní operační systém, zbývá ověřit podporu IPv6 v~samotných aplikacích. Většina moderních programů, které ke svému provozu potřebují připojení k Internetu, či které jsou na něm přímo postavené, dnes IPv6 podporují nebo mají alespoň své alternativy. Řádově slabší je ovšem situace okolo síťových her. Málokterá hra umí své datové toky řídit i na IPv6. Natož pak umožnit vytvoření herního serveru na IPv6, na který by se mohli hráči s IPv6 připojovat. Pro náruživé hráče může tento fakt znamenat jasné rozhodnutí mezi starým IPv4 a novým IPv6.

\section{Síťové prvky}
Možnost nativního nasazení IPv6 (tedy bez nutnosti tunelovat každého jednotlivého klienta) velmi často stojí a padá na jeho podpoře v aktivních síťových prvcích -- především pak routerech. Zvláště zařízení staršího data, která dlouho řadu let spolehlivě slouží svému původnímu účelu, se neumí vypořádat s IPv6, což činí síť z hlediska IPv6 nepoužitelnou.

U zařízení některých výrobců je možnost nahrát nový systém (\textit{firmware}), který již má podporu IPv6 implementovanou. U starších zařízení je takovýto firmware velmi často neoficiální a výrobcem nepodporovaný (a především nedoporučovaný). Přesto je to mnohdy jediné možné řešení, pomineme-li nákup nového zařízení.
\newpage{}

\kapitola{Proces nasazení IPv6}
\section{Přivedení IPv6 konektivity}
V praxi jsou nejčastější dva způsoby přivedené IPv6 konektivity. Jednou možností je požádat stávajícího ISP o přidělení IPv6 rozsahu. Druhou pak zaregistrování IPv6 tunelu. Jelikož je získání IPv6 rozsahu od ISP mnohdy velmi problematické (např. z toho důvodu, že sám IPv6 nemá implementováno) a silně individuální, budu se dále věnovat jen \uv{tunelování}.

\subsection{Zřízení IPv6 tunelu}
Existuje velké množství firem, které se rozhodly zdarma poskytovat plnohodnotné IPv6 tunely. V základu se takto dá \uv{pořídit} konektivita např. do Německa s velice slušnými odezvami (cca o 30 ms vyšší než normálně) a prefixem /64, příp. i /48. Při malém nasazení či při nepoužití automatické konfigurace skrze NDP pakety typu Router Advertisiment člověk bohatě vystačí i s daleko menším prefixem než je /64, a proto považuji /48 prakticky za zbytečný.

\section{Problémy se samostatnou IPv6 adresací}
\section{IPv6 kompatibilní DNS cache}
\section{Převaděč IPv6 na IPv4 a naopak}
\section{Nepokryté oblasti}
\newpage{}

\end{document}
